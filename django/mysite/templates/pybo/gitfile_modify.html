{% extends 'base.html' %}
{% block content %}
<h2 class="my-3 border-bottom pb2">&nbsp&nbsp GitHub Application</h2>
<div>
    {% if state == '' %}
    {% else %}
    <script>
        alert('{{ state }}')
    </script>
    {% endif %}
</div>
<div class='container'>
    <h3>Project Number: {{ project.id }} <br>Project Name &nbsp : {{ project.NAME }}</h3>
    <div>
        <ul>
            <br>
            <p><Strong>GitHub Repository</strong></p>
            <p><Strong>{{ project.GIT }}</Strong></p>
            <hr />
            <li>
                <form method='post' class='post-form my-3' action="{% url 'pybo:github_editfile' project.id %}">
                    {% csrf_token %}
                    <p><strong>{{ file }}</strong></p>
                    <p><textarea name="data" id="data" rows="10" cols="100">{{ content }}</textarea></p>
                    <input type="hidden" name="PATH" id="PATH" value="{{ path }}">
                    <input type="hidden" name="FN" id="FN" value="{{ file }}">
                    <br>
                    <br>
                    <button type="submit" class="btn btn-primary btn-lg">File 작성</button>
                </form>

                <form method='post' class='post-form my-3' action="{% url 'pybo:github_deletefile' project.id %}">
                    {% csrf_token %}
                    <input type="hidden" name="PATH" id="PATH" value="{{ path }}">
                    <input type="hidden" name="FN" id="FN" value="{{ file }}">
                    <button type="submit" class="btn btn-primary btn-lg">File 삭제</button>
                </form>
            </li>
            <hr />
        </ul>
    </div>
</div>
<script type='text/javascript'>
    const delete_elements = document.getElementsByClassName("delete");
    Array.from(delete_elements).forEach(function(element) {
        element.addEventListener('click', function() {
            if(confirm("정말로 삭제하시겠습니까?")) {
                location.href = this.dataset.uri;
            };
        });
    });
</script>
{% endblock %}